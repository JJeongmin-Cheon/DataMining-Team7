# 📊 Team 7 - 데이터마이닝 프로젝트

## 👥 팀 구성
**Team 7**
- 팀원 1: 천정민 21101981
- 팀원 2: 전시현 21101974
- 팀원 3: 송유진 23101924
- 팀원 4: 주홍석 23100011

## 🔍 프로젝트 주제
**서울시 공공데이터 기반 생활인구 예측**


## 📌 프로젝트 개요

### 🎯 분석 목적

본 프로젝트는 **"공휴일이나 축제가 있으면 생활인구가 증가한다"는 일반적인 가설**을  
**데이터 기반으로 수치화하고**,  
생활인구의 증감 패턴을 다양한 공공 데이터를 활용해 **정량적으로 예측**하는 데 목적이 있습니다.

우리는 단순 상관관계 이상의 설명력을 확보하고자 기상, 공휴일, 문화행사 등 복합 요인을 반영한 회귀 모델을 구성하였으며,  
이를 통해 특정 일의 생활인구 변동을 **상대적 정규화된 수치로 예측**함으로써,  
향후 도시계획, 자원 배분, 행사 운영 등 정책적·실무적 의사결정의 기초자료로 활용될 수 있는 가능성을 검토하였습니다.  
또한, **feature importance 분석을 통해 주요 변수들이 인구 변화에 미치는 영향력도 함께 탐색**하였습니다.

---

## ⚙️ 분석 방법론

### 🔗 데이터 병합 기준 및 방식

- 모든 데이터는 `기준일(STDR_DE_ID)`과 `행정동 코드(ADSTRD_CODE_SE)`를 기준으로 병합하였습니다.

| 데이터         | 기준           | 병합 방식                                   |
|----------------|----------------|---------------------------------------------|
| 생활인구        | 기준일, 행정동  | 기준 데이터 (예측 대상)                     |
| 기상 데이터     | 기준일         | 서울시 평균 기상값 일괄 병합                 |
| 공휴일 정보     | 기준일         | 공공 API 기반, 주말 포함 처리              |
| 문화행사        | 위도/경도 기반  | Kakao API 활용 reverse geocoding 수행       |
| 지하철 승하차    | 기준일, 행정동  | 수작업 매핑하여 병합했으나 예측에서는 제외   |

> 최종 병합 결과는 `dataset_with_subway.csv`로 저장되어 모델 학습에 활용됨

---

### 🧹 데이터 전처리

- `month`: 날짜로부터 월 정보 추출 (계절성 반영)
- `is_holiday`: 주말 포함 공휴일 여부 이진 처리
- `event_type`: 문화행사 유무료 여부 → 0(없음), 1(유료), 2(무료)
- `has_culture_event`: 문화행사 유무 이진화 (0/1)
- `precipitation`, `sunshine_hours`: 결측치 → 0으로 대체
- 예측에 부적합한 변수 제거: `subway_inflow`, `subway_outflow`, `유무료`, `분류`
- `TOT_LVPOP_CO`: 전체 기준 또는 행정동 기준으로 정규화

---

## 🧠 모델링 알고리즘 및 구성 방식

### 💡 사용 알고리즘

- `Random Forest Regressor`  
  - 사이킷런 기반 앙상블 회귀 모델  
  - `GridSearchCV`를 통해 하이퍼파라미터 튜닝  
  - **행정동별 모델**에서 개별 최적화 수행

- `XGBoost Regressor`  
  - 부스팅 기반 회귀 알고리즘  
  - 기본 설정 또는 수동 설정 사용  
  - `GridSearchCV`는 미적용

---

### 🧩 모델 구성 전략 (3가지 비교)

1. **행정동별 개별 모델**
   - 각 행정동마다 별도 모델 학습
   - 해석력 높으나 확장성 낮고 관리 복잡

2. **전체 통합 모델 (전체 기준 정규화)**
   - 전체 데이터를 하나의 모델로 학습
   - 평균값 수렴 경향 → 해석력 저하

3. **전체 통합 모델 (행정동별 정규화)**
   - 전체 데이터를 통합하되, target은 행정동별 평균 기준으로 정규화
   - **예측력과 해석력의 균형**이 뛰어남 → 최종 제출 모델 선정

---

### 📏 성능 평가 지표

- **RMSE (Root Mean Squared Error)**: 예측 오차의 크기를 나타냄
- **R² (결정계수)**: 모델 설명력 지표

---

## 📈 주요 결과 요약

- 행정동별 모델은 특성 반영이 뛰어나나 확장성의 한계 존재
- "행정동별 정규화" 통합 모델이 가장 안정적 성능 달성
- 문화행사 관련 변수는 정량적 예측 성능 향상에 기여

---

## 💡 분석 인사이트

- **축제 및 공휴일 변수**는 생활인구 예측에서 의미 있는 변수로 작용하며, 특히 무료 행사일 경우 상대적 인구 증가 경향이 뚜렷하게 나타남
- **기상 변수**는 단일 변수로는 영향력이 크지 않으나, 다변량 상호작용에서 예측 성능에 일정 기여
- **실시간 데이터**(**지하철 등**)를 제거함으로써 일반화된 예측 가능성을 높였으며, 사전 의사결정에 적합한 모델로 구성
- **행정동별 정규화 방식**을 도입해 지역 간 상대적 생활인구 차이를 효과적으로 반영하고, 예측 안정성 확보

---

## 🏛️ 기대 효과 및 활용 방안

- 특정 시점 및 지역의 **생활인구 변화 추이를 사전에 예측**함으로써, 공공 행정 및 행사 운영에 활용 가능
- 무료 문화행사와 같은 이벤트의 상대적 인구 유입 효과를 정량적으로 비교 분석할 수 있어 **이벤트 정책 평가에 유용**
- **도시 자원 배분**, 방역 대책 등 다양한 분야에서 참고 지표로 활용 가능
- 다만, 분석 목적상 정밀 상권 분석보다는 **정책적·행정적 활용을 위한 간접 지표**로 적합함

---

## 🛠️ 한계 및 향후 보완점

- **예측 변수의 제약**: 축제, 공휴일, 기상 등 주요 이벤트 변수는 반영되었지만, 민간 이벤트, 상권 변화, 온라인 트렌드 등은 포함되지 않아 설명력에 한계가 존재합니다.  
  또한 유일하게 확보된 교통 변수(지하철 승하차)는 전처리 과정에서 제거되어, 교통 측면의 영향력 해석이 미흡할 수 있습니다.

- **모델 해석력 한계**: 통합 모델은 예측 성능은 준수하나, 개별 지역 특성을 세밀히 설명하는 데에는 제한적입니다.

- **시간대별 예측 미반영**: 본 분석은 일 단위로 생활인구를 예측하였으며, 시간대별 변화나 패턴은 고려되지 않았습니다.

> 향후에는 SNS 트렌드, 교통량, 민간 위치기반 서비스 등 외부 데이터를 추가로 활용함으로써 예측 정밀도 및 해석력을 높일 수 있습니다.


---

## ⚙️ 코드 실행 가이드

1. `dataset_with_subway.csv`를 디렉토리에 저장
2. `team7_final.ipynb` 실행
   - 전처리 → 모델링 → 결과 시각화 순서로 구성
3. 주요 실행 셀은 코드에 주석으로 안내되어 있음

> 모든 코드는 로컬 Jupyter 환경에서 재현 가능하며, 필요한 라이브러리는 상단 셀에서 설치 안내

---

## ✅ 재현 가능성

본 프로젝트는 공개된 공공데이터 및 코드 기반으로 작성되어  
다른 사용자가 동일한 데이터를 바탕으로 동일한 분석 결과를 재현할 수 있도록 구성되어 있습니다.

- 데이터 출처: 모두 공개된 공공 API 및 서울시 오픈데이터
- 코드 실행 흐름: `team7_final.ipynb` 기준으로 전처리 ~ 예측 전과정 포함

---

## 🔗 원본 데이터 출처

병합에 활용된 공공데이터는 다음과 같습니다 (별도 업로드는 생략):

- 서울시 생활인구 데이터: [data.seoul.go.kr](https://data.seoul.go.kr)
- 기상청 기상자료 개방포털: [data.kma.go.kr](https://data.kma.go.kr)
- 공공 공휴일 API: [data.go.kr](https://www.data.go.kr)
- 서울시 문화행사 데이터: [data.seoul.go.kr](https://data.seoul.go.kr)

---

## 📌 참고사항

`data_merging_final.ipynb`에는 Kakao Maps 기반의 reverse geocoding 과정이 포함되어 있어 실행 시간이 다소 길고,  
API 키 노출 우려 등 보안적인 이슈도 존재합니다. 또한 병합 과정 중에는 일부 데이터셋의 이름 변경 및 삭제가 여러 차례 발생하였습니다.

따라서 전체 병합 과정을 처음부터 재현하기보다는,  
이미 생성된 최종 병합 데이터셋(`dataset_with_subway.csv`)을 활용하여 분석을 진행하는 것을 권장드립니다.


